# 波动率预测与期权交易策略建模(Volatility Prediction and Options Trading Strategy Modeling)

## 项目简介 (Project Overview)

这是一个旨在通过机器学习方法，对**金融市场中的各类标的物（如股指、ETF、个股等）**的未来波动率进行预测，并基于预测结果构建自动化期权交易策略的通用量化研究框架。

项目的核心是量化**未来已实现波动率 (Realized Volatility, RV)** 与**当前期权市场隐含波动率 (Implied Volatility, IV)** 之间的价差，以指导买入或卖出波动率的期权组合（如跨式、宽跨式等），从而系统性地捕捉不同标的物上的波动率风险溢价。

## 核心目标 (Core Objective)

本项目旨在回答以下核心问题：
> **我们能否通过历史数据和期权衍生数据，建立一个能有效预测未来一段时间内，特定标的物的已实现波动率将显著高于还是低于当前市场隐含波动率的通用模型？**

模型的输出将是一个分类信号，指导具体的交易决策：
* **信号 1 (做多波动率):** 预测未来RV将显著高于当前IV。
* **信号 -1 (做空波动率):** 预测未来RV将显著低于当前IV。
* **信号 0 (无操作):** 预测未来RV与当前IV无显著差异，不存在交易机会。

## 策略逻辑 (Strategy Logic)

模型的预测信号将直接映射到具体的期权策略：
* **接收到信号 1:** 执行 **买入跨式/宽跨式组合 (Long Straddle/Strangle)**，押注未来市场波动加剧。
* **接收到信号 -1:** 执行 **卖出跨式/宽跨式组合 (Short Straddle/Strangle)**，押注未来市场风平浪静，以赚取时间价值和波动率下降的利润。

## 技术栈 (Tech Stack)

* **数据处理:** `Python`, `Pandas`, `NumPy`
* **机器学习:** `Scikit-learn`, `XGBoost`, `LightGBM`
* **期权定价:** 自定义或使用 `QuantLib` 等库实现Black-Scholes-Merton模型
* **数据可视化:** `Matplotlib`, `Seaborn`
* **数据源 (初期):** 本地CSV文件或数据库 (SQLite)

## 项目工作流 (Project Workflow)

本项目将遵循标准的量化研究流程，以迭代方式进行开发：

1.  **数据采集与清洗:** 从数据源获取所需数据，进行缺失值处理、异常值检测和数据对齐。
2.  **特征工程 (因子库构建):** 基于原始数据，计算并合成一系列用于预测波动率的因子。
3.  **模型训练:** 使用**步进向前验证 (Walk-Forward Validation)** 的方式训练机器学习模型，以避免前视偏差。
4.  **回测引擎:** 开发一个事件驱动的回测系统，模拟真实的交易执行、手续费和滑点。
5.  **策略执行逻辑:** 将模型信号转化为具体的开平仓指令，包括选券逻辑（选择到期日、行权价）。
6.  **绩效分析:** 对回测结果进行全面的绩效评估，包括夏普比率、最大回撤、年化收益率等。

## 数据需求 (Data Requirements)

### 一阶段 (核心启动数据)
* **标的物行情:** **目标标的物**的日线K线数据 (例如：沪深300指数, 上证50ETF, 特定股票等)。
* **期权链数据:** **目标标的物对应**的每日全量期权链数据（包括所有行权价和多个到期月份）。
* **无风险利率:** 市场无风险利率的历史时间序列 (例如: SHIBOR)。

### 二阶段 (性能提升数据)
* **高频数据:** **目标标的物**的分钟级行情数据，用于精确计算**已实现波动率 (RV)**。
* **相关市场数据:** 与目标标的物相关的其他市场指数或资产的数据。
* **宏观经济数据:** PMI, CPI, M2等。

## 特征工程（因子库） (Feature Engineering)

因子库是本项目的核心资产，将包含但不限于以下可适用于多种标的物的因子：

### A. 基于标的物历史数据
* `HV_20D`, `HV_60D`: 基于日线收盘价计算的20日、60日历史波动率。
* `ATR_14D`: 14日平均真实波幅。
* `RSI_14D`: 14日相对强弱指数。

### B. 基于期权合成数据
* `ATM_IV_30D`: 通过插值计算的标准化30天期**平价隐含波动率**。
* `TERM_STRUCTURE_60D_30D`: 60天与30天ATM IV的价差，反映波动率期限结构。
* `SKEW_30D_25DELTA`: 30天期25-delta看跌与看涨期权IV的价差，反映市场偏斜与恐慌情绪。
* `PCR_OI`, `PCR_VOL`: 基于持仓量和成交量的看跌/看涨比率。

## 未来工作 (Future Work)

* [ ] **多品种扩展:** 将框架设计得更具扩展性，使其能够并行处理和回测多个不同标的物。
* [ ] **升级目标变量:** 待获取分钟数据后，将模型的预测目标 `y` 从基于HV的粗糙指标升级为基于RV的精确指标。
* [ ] **扩充因子库:** 引入更多另类数据和宏观经济因子。
* [ ] **模型优化:** 尝试不同的机器学习模型（如深度学习LSTM）和超参数调优。
* [ ] **动态头寸管理:** 开发更精细化的出场策略（如动态止盈止损）和资金管理模块。
* [ ] **迁移学习:** 探索将在全市场数据上预训练的通用模型，微调至**特定目标标的物**上的可能性。

